---
title: ISP图像处理——紫边Purple Fringing占坑
date: 2020-04-22 18:44:45
tags: [ISP, 图像处理]
---

ISP图像处理——紫边Purple Fringing
<!--more-->



   图像紫边存在数码相机、监控摄像头等数字成像图像，使用设备在逆光、大光圈条件下拍摄图像的高反差区域容易出现紫边，解决图像自编问题有助设备得到完美图像。

紫边成因分析和确定有助与紫边消除的图像处理算法研究和摄像设备工程改进，能够改善自编的硬件成本更高，非常需要研究去除紫边的图像处理算法。

### 
众所周知，镜头色差会使得图像中物体边缘出现不属于物体的颜色，我们将 物体边缘出现的颜色称为色差色边0光学色差分为纵向色差和横向色差，纵向色 差又叫轴向色差。对于横向色差，通常在图像全局上进项校正将红绿蓝三 个颜色通道调整到相同的放大倍数，一般通过拍摄棋盘格标定，这对于固定的光 学镜头比较有效，但是对变焦镜头则难以适用。对于轴向色差的校正，文献[27】[28】 进行了早期的研究，文献[241提出了一种在小波域中处理色差的算法，算法效果较 好，不足之处在于f要确定镜头成像参数并且算法对于较大的色差效果有隈。
 

对于紫边的成因，通黹认为是镜头/微透镜色差所导致如图2-1所 示，成像系统_般将绿色通道准确对焦，然而由于镜头/微镜头色差，蓝色和红色



边，可以发现二者之间存在差别，知图2-2所示。
在图2-2中，图(a)种包含色差色边，图(b)中含有紫边，对比二者可以发现色 差引起的图像色边包含紫红色、绿色色边，在放大的图像区域中黑色物体边界出 现了紫色边，同时也出现了绿色色边，它们的分布呈现一定对称性。而在图(b)的 放大区域中可见棋盘格白色格子的四周出现了紫色边，但是不含有绿色色边。
图2-2两唱图像的另一个重要差别在于，图(a)色差色差色边是全局性的：而 图(b)紫边图像只分布在图像中一些局部区域，主要分布在天空中物体的边缘。
(2)图像颜色插值算法（去马赛克算法〉
颜色插值算法是数宇成像系统的核心技术之一，对图像颜色影响巨大，如图 2-3(a)所示为数字成像系统流程f32],在数字成像系统中，一般由单个CCD/CMOS 获得经过CFA(Color Filter Array)过滤后的图像原始数据，这样每个传感器只采集 了一个颜色通遣的数据，这些数据排列规律与CFA的样式是一致的，其中图2- 3(b)的BayerPattem是使用最多的样式，在这种样式中绿色通道的采样率比另外 两个颜色通道的采样率高。颜色插值算法的目的就是将图2-3(a)得到的单阵列图 像数据插值计算还原为三个阵列的彩色图像数据。





从2-3(b)可知绿色通道的采样頻率比蓝色和红色通道的采样频串高，导致在 傅里叶空间，绿色采样结果相对于红色和蓝色通道来说不会发生混叠如下图 2~4所示，在图(a)中是原始彩色图像的頻谱，其最大的频率为/_;图(b)是经过 CFA的绿色通道采样的结果傅里叶頻谱；图(c)是CFA的红色蓝色通道采样的结 果的傅里叶频谱，可以看到由于CFA红色和蓝色的采样频率偏低造成了这两个 结果的髙頻混叠，而绿色通道的采样结杲则可以几乎完全恢复结果。红、蓝顏色 通道釆祥结果高頻混叠是颜色插值算法恢复的彩色图像结杲产生诸多副作用的


根本原因，颜色插值算法需要解决红蓝采样结果的高頻混叠以抑制禊糊(blurring)、 锅齿效应(zippereffects)、緒误色彩(falsecolors)，嗓声（noise)、绿色不平衡效应 (green imbalance effect)等副作用⑴。
 
图2~4图像信号傅里叶频谱（a)應图（b)G通遊采样结果（c)l B采样结果 颜色插值算法如果不能合理地处理红蓝通道的高频混叠，其恢复结果中图像 边缘、图像纹理等高频部分则会出现颜色错误(falsccolor),具体表现如图2-5所 示，右上图为原始图像，右下图•是使用双线性插值得到的插值结果，可见颜色插 值算法使得物体的边缘、图像纹理等高频区域颜色出现伪彩色。




#[我的个人博客主页，欢迎访问](http://www.aomanhao.top/)
#[我的CSDN主页，欢迎访问](https://blog.csdn.net/Aoman_Hao)
#[我的GitHub主页，欢迎访问](https://github.com/AomanHao)


