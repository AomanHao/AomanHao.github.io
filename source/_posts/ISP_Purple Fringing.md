---
title: ISP图像处理——紫边Purple Fringing
date: 2020-04-22 18:44:45
tags: [ISP, 图像处理]
---

ISP图像处理——紫边Purple Fringing
<!--more-->


图像紫边存在数码相机、监控摄像头等数字成像图像，使用设备在逆光、大光圈条件下拍摄图像的高反差区域容易出现紫边，解决图像自编问题有助设备得到完美图像。



紫边成因分析和确定有助与紫边消除的图像处理算法研究和摄像设备工程改进，能够改善自编的硬件成本更高，非常需要研究去除紫边的图像处理算法。

### 镜头色差
众所周知，镜头色差会使得图像中物体边缘出现不属于物体的颜色，我们将物体边缘出现的颜色称为色差色边。光学色差分为`纵向色差`和`横向色差`，纵向色差又叫轴向色差。对于横向色差，通常在图像全局上进项校正，将红绿蓝三 个颜色通道调整到相同的放大倍数，一般通过拍摄棋盘格标定，这对于固定的光学镜头比较有效，但是对变焦镜头则难以适用。
 ![](https://img-blog.nos-eastchina1.126.net/blog/blog_PF_色差.png)


对于紫边的成因，通常认为是镜头/微透镜色差所导致，如图2-1所 示，成像系统一般将绿色通道准确对焦，然而由于镜头/微镜头色差，蓝色和红色通道不能完全准确对焦，从而使物体边缘出现紫红色的色边。

### 图像颜色插值算法（去马赛克算法〉
颜色插值算法是数宇成像系统的核心技术之一，对图像颜色影响巨大，如图 所示为数字成像系统流程。
![](https://img-blog.nos-eastchina1.126.net/blog/blog_PF_数字成像系统.png)

在数字成像系统中，一般由单个CCD/CMOS 获得经过CFA(Color Filter Array)过滤后的图像原始数据，这样每个传感器只采集 了一个颜色通遣的数据，这些数据排列规律与CFA的样式是一致的。

颜色插值算法如果不能合理地处理红蓝通道的高频混叠，其恢复结果中图像 边缘、图像纹理等高频部分则会出现颜色错误(falsccolor),具体表现如图2-5所 示，右上图为原始图像，右下图•是使用双线性插值得到的插值结果，可见颜色插 值算法使得物体的边缘、图像纹理等高频区域颜色出现伪彩色。



早期一些简单的颜色插值算法比如最近邻、双线性、边缘定向(edgedircctcd) 等方法在空间域恢复图像颜色，这些方法没能很好处理高頻混叠导致恢复后 的物体边缘带来锯齿效应以及错误颜色。
目前顏色插值算法在消混叠方面已经做得很好，即使在图像中物体边缘，纹 理等高频区域也能很好地恢复图像颜色井避免带来错误颜色 

![](https://img-blog.nos-eastchina1.126.net/blog/blog_PF_伪色.png)


### 过曝区域图像色边
图像的过曝区域边缘会出现蓝紫色背景，具体表现如图〗-2(c)图所示。数字成像器件`CCD`和`CMOS`当过度曝光时会产生电荷溢出现象，当一个像素过度曝光时，其产生的电荷会泄漏到临近的像素并污染图像中的临近区域的场景信号，如图所示，CMOS对于过曝溢出的表现要好于CCD。左侧CMOS,右侧CCD
![](https://img-blog.nos-eastchina1.126.net/blog/blog_PF_过曝.png)

从以上的分析可知，图像紫边是数字成像系统的短波色差引起的，并且在图 像中受紫边影响严重的区域是天空、灯光附近等物体的边缘，由于天空和灯光的 光谱中富含短波成分导致图像中这一区域内部的物体边缘出现较为严重的色边, 进而影响图像在这一区域的视觉效果。
对于成像系统的色差校正，最重要的工作在于光学系统的设计。目前的现状 是，由于受到生产制造成本，器件大小等因素的限制，光学镜头能很好地控制光 学色差。但是对一些時定场景下比如逆光对着天空和灯光区域成徼，数字成像系 统对于图像紫边的控制仍然不够，光学系统的短波色差在图像中凸显出来。考虑 到进一步提升镜头设计的成本过高，人们将思路转向后期的图像处理算法，图像 处理算法能够针对性地处理色差色边、图僳紫边等图像问題，并且成本也得到了 极大的节省。


参考文献：《数字成像系统图像消紫边方法研究》

#[我的个人博客主页，欢迎访问](http://www.aomanhao.top/)
#[我的CSDN主页，欢迎访问](https://blog.csdn.net/Aoman_Hao)
#[我的GitHub主页，欢迎访问](https://github.com/AomanHao)


