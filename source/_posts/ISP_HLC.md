---
title: 强光抑制算法研究
date: 2020-05-16 18:44:45
tags: [图像处理, 图像增强]
---

强光抑制算法研究
<!--more-->

## 强光抑制功能

　　在夜间由于视线问题，视野范围大大减少，醉酒驾车、闯红灯问题时有发生，如何减少交通事故的发生，道路监控在这方面有着很大的帮助。但同样的问题，夜晚则是考验监控设备的时候，如何能更清楚的监控道路车辆，对于减少交通事故能够起到很大的帮助。

　　而强光抑制功能则是道路监控必不可少的功能之一，它的作用非常大，笔者简单介绍一些该技术。强光抑制技术能够有效抑制强光点直接照射造成的光晕偏大，视频图像模糊，自动分辨强光点，并对强光点附近区域进行补偿以获得更清晰的图像。其作用是有效抑制迎面的强光，在夜间监控道路车辆时，能较清晰的捕捉车辆车牌。适用于收费站、停车场出路口等区域。

　　可能单纯的概念不足以证实这个功能，下面让大家通过一组图片来了解一下，通过两幅图片的对比，大家能够清楚的认识到该功能的作用，对于漆黑的夜晚，具备这样功能的监控设备一样可以很少的处理灯光问题，保证视频画面的清晰度。

强光抑制功能对比

![关](https://img-blog.nos-eastchina1.126.net/PersonalPhoto/blog_HLC_close.jpg)

![hlc开](https://img-blog.nos-eastchina1.126.net/PersonalPhoto/blog-HLC_open.jpg)

## 强光抑制算法研究 
在收费站、停车场等路口区域，夜晚车灯开启后，要获取更好的车辆信息，就需要对强光抑制。夜间明亮区域会曝光过度，较暗的区域会曝光不足，整幅图像在一个较窄的动态范围内，强光抑制算法是采用 DSP 技术，把强光部分弱化，使暗光部分变亮，达到光线平衡。强光抑制技术可以有效抑制强光点直接照射造成的光晕偏大，视频图像模糊，分辨出强光点并对强光附近的区域进行补偿，获得更清晰的图像。 

一个好的强光抑制滤波处理芯片关键部分是强光抑制处理算法，常用的强光抑制处理算法有，背光补偿方式，白峰反转方式和扩展动态范围方式。 

背光补偿方式：
在图像预处理阶段进行背光补偿处理，保证每次都能正确的曝光，通过检测子区域的平均讯号确定 AGC 电路的增益值，改善视场的可视性。

白峰反转方式：
拍摄避光状态或拍摄亮度值差较大的对象时，舍弃高亮度部分画面的情况，这种方式不能获取整幅场景的细节。

扩展动态范围的方式：
动态范围是一个信号系统的最大值与最小值之间的比例，对一个实际场景来说，动态范围是这个场景中最亮的光辐射度和最暗的光辐射度之比

>动态范围指摄像机色彩正好饱和的亮度同背景噪声提高一个标准差的亮度的比值，在摄影领域里面动态范围就是两个亮度的比值。

图像传感器的动态范围定义为： 
  $$a=20lg(I_min/I_max)$$               
$I_min$和 $I_max$ 是 CCD 线性检测到的入射光的最小和最大光强，单位流明(lm)，若用光照度表示动态范围，可定义为： 
   $$a=20lg(E_min/E_max)$$                   (5.18) 
$E$ 为图像传感器像素的光照度，单位勒克斯 (lx) ，控制图像效果的曝光量EV(Exposure Value)与光强、光照度之间的关系为： 
            (5.19) 
自然环境的动态范围常在 100dB 以上，一般摄像机拍摄图像的对比度为几十分贝值。

现阶段，进行图像动态范围扩展，主要在软件算法上扩展动态范围。
选择合适的图像处理方法扩展动态范围，对同一场景连续采集多次，然后利用数字图像处理算法对图像进行合成，达到扩展动态范围的目的，提高图像信噪比，进一步增强图像。 



### 线性扩展算法进行强光抑制 
韦伯(Weber)定律指出人们能够觉察到的光强度差别与背景光强度有关，举个例子说明这种关系，在亮度较强的屋子里点一根蜡烛，几乎发现不了蜡烛的存在；若将这根蜡烛移到黑暗的屋子里面，蜡烛就会很明显。由人眼睛视觉和心理特性可知，变换幅度大和细节丰富的区域更容易引起人眼的注意，变化平坦的区域不易引起人的注意，依据人眼睛的灰度特性，处理灰度图像时，对占有范围较窄的低灰度级和高灰度级区域，将它们的灰度间隔拉伸；适当压缩间隔较大的中等灰度区域，并把剩余的灰度级分配给那些需要扩展的高灰度级区域或低灰度级区域。 
多幅图像扩展线性动态范围，在图像处理前，选择不同的快门来拍摄图像，在线性动态范围扩展中，选择不同图片中相同位置的图像细节信息，并把它们组成一帧新的图像，最简单的处理方法是是将图像相加求平均，但是处理的图像范围很窄，。研究中，选择了一种和人眼最匹配的线性扩展算法，从两幅图像的相同位置取灰度值$g1(x,y)$、$g2(x,y)$，进行线性加权合成图像$gf(x,y)$： 

$$gf(x,y)=a_1*g1(x,y) +a2*g2(x,y)$$

其中 $a1$，$a2$是 $g1(x,y)$和 $g2(x,y)$的权值，理论研究证明人的眼睛对图像灰度敏感区域是 32-192 之间，因此进行图像处理时设定两个边界值 $Tmin$=32，$Tmax=192$

将两幅图像的灰度区间分成三部分，然后对三部分分段线性取权值，然后合成图像。为了达到理想的效果需要在不同的灰度区域取合适的权值，在较亮的场景中，需要将较暗图像的权值设置的大一些，在太暗的情况下就要将较暗图像的权值设置的小一些，在两幅图像合成中，不同区域的权值计算方法如下表所示： 
![hlc](https://img-blog.nos-eastchina1.126.net/PersonalPhoto/Bolg_HLC_LINE2.png)


算法步骤如下：
![hlc](https://img-blog.nos-eastchina1.126.net/PersonalPhoto/Bolg_HLC_LINE.png)


参考文章：

参考文献：





#[我的个人博客主页，欢迎访问](http://www.aomanhao.top/)
#[我的CSDN主页，欢迎访问](https://blog.csdn.net/Aoman_Hao)
#[我的GitHub主页，欢迎访问](https://github.com/AomanHao)


